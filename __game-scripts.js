var Rotation=pc.createScript("rotation");Rotation.attributes.add("torque",{type:"number",default:1}),Rotation.attributes.add("speed",{type:"number",default:.1}),Rotation.attributes.add("direction",{type:"string",default:"right"}),Rotation.attributes.add("PlanetEntity",{type:"entity",title:"Planet Entity"}),Rotation.prototype.update=function(t){globalVariables.IsGamePause||(this.entity.rigidbody?this.entity.rigidbody.applyTorque(0,this.torque,0):this.entity.getLocalEulerAngles().y<-40?"right"===this.direction?this.entity.rotateLocal(0,50*this.speed,0):this.entity.rotateLocal(0,50*-this.speed,0):"right"===this.direction?this.entity.rotateLocal(0,this.speed,0):this.entity.rotateLocal(0,-this.speed,0))};var Line=pc.createScript("line");Line.attributes.add("Radius",{type:"number",default:1}),Line.prototype.update=function(e){var t=new pc.Vec4,r=pc.Color.WHITE,n=this.Radius;this.renderArc(t,n,200,r)},Line.prototype.renderArc=function(e,t,r,n){var a,i=[],c=[],p=2*Math.PI/r,s=0;for(a=0;a<r;a++){var o=Math.sin(s),h=Math.cos(s);s+=p;var u=Math.sin(s),d=Math.cos(s);i.push(new pc.Vec3(e.x+t*o,e.y,e.z+t*h),new pc.Vec3(e.x+t*u,e.y,e.z+t*d)),c.push(n,n)}this.app.renderLines(i,c)};var Projectile=pc.createScript("projectile");Projectile.attributes.add("FireBallEntity",{type:"entity"}),Projectile.attributes.add("TargetUIEntity",{type:"entity"}),Projectile.attributes.add("LineEntity",{type:"entity"}),Projectile.attributes.add("CameraEntity",{type:"entity",title:"Camera Entity"}),Projectile.attributes.add("OrbitSensitivity",{type:"number",default:.3,title:"Orbit Sensitivity",description:"How fast the camera moves around the orbit. Higher is faster"}),Projectile.attributes.add("StartPosition",{type:"vec3",default:[0,0,0]}),Projectile.attributes.add("EndPosition",{type:"vec3",default:[5,0,0]}),Projectile.attributes.add("radius",{type:"number",title:"BoundingRadius"});var showPrjectile=!1;Projectile.prototype.initialize=function(){this.ray=new pc.Ray,this.hitPosition=new pc.Vec3,this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.lastTouchPoint=new pc.Vec2,this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this))},Projectile.horizontalQuat=new pc.Quat,Projectile.verticalQuat=new pc.Quat,Projectile.resultQuat=new pc.Quat,Projectile.prototype.rotate=function(t,i){this.entity.getLocalEulerAngles().y<85&&this.entity.getLocalEulerAngles().y>-55?this.entity.rotateLocal(0,-i,0):this.entity.getLocalEulerAngles().y>=85?this.entity.setEulerAngles(0,84.9,0):this.entity.getLocalEulerAngles().y<=-55&&this.entity.setEulerAngles(0,-54.9,0)},Projectile.prototype.onTouchStart=function(t){if(!globalVariables.IsGamePause&&!globalVariables.IsFired){var i=t.touches[0],e=this.CameraEntity.getPosition(),a=this.CameraEntity.camera.screenToWorld(i.x,i.y,this.CameraEntity.camera.farClip),s=this.app.systems.rigidbody.raycastFirst(e,a);if(s){var o=s.point;this.EndPosition=o,showPrjectile=!0,this.TargetUIEntity.enabled=!0;var r=new pc.Vec3;this.CameraEntity.camera.worldToScreen(this.EndPosition,r);var n=this.app.graphicsDevice.maxPixelRatio;r.x*=n,r.y*=n;var h=this.TargetUIEntity.element.screen.screen.scale,c=this.app.graphicsDevice;this.TargetUIEntity.setLocalPosition(r.x/h,(c.height-r.y)/h,0)}}},Projectile.prototype.onTouchMove=function(t){if(!globalVariables.IsGamePause&&!globalVariables.IsFired){var i=t.touches[0],e=this.CameraEntity.getPosition(),a=this.CameraEntity.camera.screenToWorld(i.x,i.y,this.CameraEntity.camera.farClip),s=this.app.systems.rigidbody.raycastFirst(e,a);if(s){var o=s.point;this.EndPosition=o;var r=new pc.Vec3;this.CameraEntity.camera.worldToScreen(this.EndPosition,r);var n=this.app.graphicsDevice.maxPixelRatio;r.x*=n,r.y*=n;var h=this.TargetUIEntity.element.screen.screen.scale,c=this.app.graphicsDevice;this.TargetUIEntity.setLocalPosition(r.x/h,(c.height-r.y)/h,0)}}},Projectile.prototype.onTouchEnd=function(t){if(!globalVariables.IsGamePause&&!globalVariables.IsFired&&this.TargetUIEntity.enabled){showPrjectile=!1;var i=this.FireBallEntity.clone();i.enabled=!0,this.entity.parent.addChild(i),this.TargetUIEntity.enabled=!1,globalVariables.IsFired=!0,i.script.fireBall.DestroyFireBall()}},Projectile.prototype.onMouseDown=function(t){if(!globalVariables.IsGamePause&&!globalVariables.IsFired){var i=this.CameraEntity.getPosition(),e=this.CameraEntity.camera.screenToWorld(t.x,t.y,this.CameraEntity.camera.farClip),a=this.app.systems.rigidbody.raycastFirst(i,e);if(a){var s=a.point;this.EndPosition=s,showPrjectile=!0,this.TargetUIEntity.enabled=!0;var o=new pc.Vec3;this.CameraEntity.camera.worldToScreen(this.EndPosition,o);var r=this.app.graphicsDevice.maxPixelRatio;o.x*=r,o.y*=r;var n=this.TargetUIEntity.element.screen.screen.scale,h=this.app.graphicsDevice;this.TargetUIEntity.setLocalPosition(o.x/n,(h.height-o.y)/n,0)}}},Projectile.prototype.onMouseMove=function(t){if(!globalVariables.IsGamePause&&!globalVariables.IsFired){var i=this.CameraEntity.getPosition(),e=this.CameraEntity.camera.screenToWorld(t.x,t.y,this.CameraEntity.camera.farClip),a=this.app.systems.rigidbody.raycastFirst(i,e);if(a){var s=a.point;this.EndPosition=s;var o=new pc.Vec3;this.CameraEntity.camera.worldToScreen(this.EndPosition,o);var r=this.app.graphicsDevice.maxPixelRatio;o.x*=r,o.y*=r;var n=this.TargetUIEntity.element.screen.screen.scale,h=this.app.graphicsDevice;this.TargetUIEntity.setLocalPosition(o.x/n,(h.height-o.y)/n,0)}}},Projectile.prototype.onMouseUp=function(t){if(!globalVariables.IsGamePause&&!globalVariables.IsFired){var i=this.CameraEntity.getPosition(),e=this.CameraEntity.camera.screenToWorld(t.x,t.y,this.CameraEntity.camera.farClip),a=this.app.systems.rigidbody.raycastFirst(i,e);if(a&&this.TargetUIEntity.enabled){var s=a.point;this.EndPosition=s,showPrjectile=!1;var o=this.FireBallEntity.clone();o.enabled=!0,this.entity.parent.addChild(o),this.TargetUIEntity.enabled=!1,globalVariables.IsFired=!0,o.script.fireBall.DestroyFireBall()}}},Projectile.prototype.update=function(t){if(!globalVariables.IsGamePause&&!globalVariables.IsFired)if(showPrjectile){this.app.mouse,pc.Color.RED;this.LineEntity.enabled=!0;var i=(new pc.Vec3).sub2(this.StartPosition,this.EndPosition).length();this.LineEntity.setPosition(this.StartPosition),this.LineEntity.lookAt(this.EndPosition);var e=this.LineEntity.getLocalScale();e.z=i,this.LineEntity.setLocalScale(e)}else this.LineEntity.enabled=!1},Projectile.prototype.check=function(){console.log("Other Method Called")},Projectile.prototype.swap=function(t){this.ray=t.ray,this.hitPosition=t.hitPosition,t.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),t.app.mouse.off(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),t.app.mouse.off(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.lastTouchPoint=t.lastTouchPoint,t.app.touch&&(t.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this),t.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),t.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchEnd,this),this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this))};var FireBall=pc.createScript("fireBall");FireBall.attributes.add("GameManagerEntity",{type:"entity"}),FireBall.attributes.add("ParticleSystemEntity",{type:"entity"}),FireBall.attributes.add("RaycastEntity",{type:"entity"}),FireBall.attributes.add("MoveSpeed",{type:"number",default:10}),FireBall.attributes.add("StartPosition",{type:"vec3",default:[0,0,0]}),FireBall.attributes.add("EndPosition",{type:"vec3",default:[5,0,0]}),FireBall.attributes.add("IsHitted",{type:"boolean",default:!1}),FireBall.prototype.initialize=function(){this.StartPosition=this.entity.getPosition(),this.EndPosition=this.RaycastEntity.script.projectile.EndPosition,this.val=0},FireBall.prototype.update=function(t){if(!globalVariables.IsGamePause){var e=new pc.Vec3;this.EndPosition.y=0,e.sub2(this.EndPosition,this.StartPosition);e.length();e.normalize();var i=e.clone();i.scale(this.MoveSpeed*t),this.entity.translate(i)}},FireBall.prototype.DestroyFireBall=function(){setTimeout((()=>{this.IsHitted||this.GameManagerEntity.script.sunLightGameManager.ReduceStarCountForMissed(),globalVariables.IsFired=!1,this.entity.destroy()}),1300)};var PlanetHandler=pc.createScript("planetHandler");PlanetHandler.attributes.add("PlanetIndex",{type:"number"}),PlanetHandler.attributes.add("PlanetParentEntity",{type:"entity"}),PlanetHandler.attributes.add("Radius",{type:"number",default:1}),PlanetHandler.attributes.add("RotateSpeed",{type:"number",default:1}),PlanetHandler.attributes.add("Selected",{type:"boolean",default:!1}),PlanetHandler.attributes.add("wrongIndication",{type:"boolean",default:!1}),PlanetHandler.attributes.add("SpeedTextEntity",{type:"entity"}),PlanetHandler.attributes.add("FaceAnimationEnity",{type:"entity"}),PlanetHandler.attributes.add("HitParticleEnity",{type:"entity"}),PlanetHandler.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.onTriggerEnter,this)},PlanetHandler.prototype.onTriggerEnter=function(t){if(t.tags.has("OutSide"))0===this.PlanetIndex||1===this.PlanetIndex||2===this.PlanetIndex||3===this.PlanetIndex?this.PlanetParentEntity.setEulerAngles(new pc.Vec3(0,40,0)):4===this.PlanetIndex?this.PlanetParentEntity.setEulerAngles(new pc.Vec3(0,60,0)):5===this.PlanetIndex?this.PlanetParentEntity.setEulerAngles(new pc.Vec3(0,65,0)):(6===this.PlanetIndex||7===this.PlanetIndex)&&this.PlanetParentEntity.setEulerAngles(new pc.Vec3(0,75,0));else{this.Selected?(this.FaceAnimationEnity.script.materialAnimationHandler.PlayAnimation(1),t.script.fireBall.GameManagerEntity.script.sunLightGameManager.AddStarCount(),this.Selected=!1):(this.FaceAnimationEnity.script.materialAnimationHandler.PlayAnimation(2),t.script.fireBall.GameManagerEntity.script.sunLightGameManager.ReduceStarCount()),t.script.fireBall.IsHitted=!0,t.destroy();var e=this.HitParticleEnity.clone();this.entity.parent.addChild(e),e.setPosition(t.getPosition()),e.enabled=!0,setTimeout((()=>{e.destroy()}),3e3)}},PlanetHandler.prototype.update=function(t){this.entity.rotateLocal(0,this.RotateSpeed,0);var e=pc.Color.GREEN,n=this.entity.getPosition(),a=this.Radius;this.Selected||this.wrongIndication&&(e=pc.Color.RED,this.renderArc(n,a,200,e),setTimeout(function(){this.wrongIndication=!1}.bind(this),2e3))},PlanetHandler.prototype.renderArc=function(t,e,n,a){var i,r=[],l=[],s=2*Math.PI/n,d=0;for(i=0;i<n;i++){var o=Math.sin(d),c=Math.cos(d);d+=s;var p=Math.sin(d),h=Math.cos(d);r.push(new pc.Vec3(t.x+e*o,t.y,t.z+e*c),new pc.Vec3(t.x+e*p,t.y,t.z+e*h)),l.push(a,a)}this.app.renderLines(r,l)};var MaterialAnimationHandler=pc.createScript("materialAnimationHandler");MaterialAnimationHandler.attributes.add("AnimationMaterials",{type:"asset",assetType:"material",array:!0}),MaterialAnimationHandler.attributes.add("AnimationIndex",{type:"number",default:0}),MaterialAnimationHandler.attributes.add("Row",{type:"number",array:!0}),MaterialAnimationHandler.attributes.add("Column",{type:"number",array:!0}),MaterialAnimationHandler.attributes.add("FrameRate",{type:"number",default:1,description:"Playback frames per second"}),MaterialAnimationHandler.attributes.add("Animation_0_HoldDurations",{type:"number",array:!0}),MaterialAnimationHandler.attributes.add("Animation_1_HoldDurations",{type:"number",array:!0}),MaterialAnimationHandler.attributes.add("Animation_2_HoldDurations",{type:"number",array:!0}),MaterialAnimationHandler.attributes.add("Animation_3_HoldDurations",{type:"number",array:!0}),MaterialAnimationHandler.attributes.add("Animation_4_HoldDurations",{type:"number",array:!0}),MaterialAnimationHandler.attributes.add("IsAnimation_0_Holdable",{type:"boolean",default:!1}),MaterialAnimationHandler.attributes.add("IsAnimation_1_Holdable",{type:"boolean",default:!1}),MaterialAnimationHandler.attributes.add("IsAnimation_2_Holdable",{type:"boolean",default:!1}),MaterialAnimationHandler.attributes.add("IsAnimation_3_Holdable",{type:"boolean",default:!1}),MaterialAnimationHandler.attributes.add("IsAnimation_4_Holdable",{type:"boolean",default:!1}),MaterialAnimationHandler.attributes.add("IsAnimationLoopable",{type:"boolean",array:!0}),MaterialAnimationHandler.attributes.add("MainLoopAnimationIndex",{type:"number",default:0}),MaterialAnimationHandler.prototype.initialize=function(){var t=10*Math.random();setTimeout((()=>{this.PlayAnimation(this.AnimationIndex)}),1e3*t)},MaterialAnimationHandler.prototype.PlayAnimation=function(t){this.AnimationIndex=t,this.material=this.AnimationMaterials[t].resource,this.frame=0,this.timer=1/this.FrameRate,0===t?this.IsAnimation_0_Holdable&&(this.timer=this.Animation_0_HoldDurations[this.frame]/this.FrameRate):1===t?this.IsAnimation_1_Holdable&&(this.timer=this.Animation_1_HoldDurations[this.frame]/this.FrameRate):2===t?this.IsAnimation_2_Holdable&&(this.timer=this.Animation_2_HoldDurations[this.frame]/this.FrameRate):3===t?this.IsAnimation_3_Holdable&&(this.timer=this.Animation_3_HoldDurations[this.frame]/this.FrameRate):4===t&&this.IsAnimation_4_Holdable&&(this.timer=this.Animation_4_HoldDurations[this.frame]/this.FrameRate),this.transform=new Float32Array(4),this.updateMaterial(this.frame)},MaterialAnimationHandler.prototype.update=function(t){if(!globalVariables.IsGamePause&&(this.timer-=t,this.timer<0)){if(this.frame++,this.frame>=this.Row[this.AnimationIndex]+this.Column[this.AnimationIndex])if(this.IsAnimationLoopable[this.AnimationIndex])this.frame=0;else{var a=10*Math.random();this.frame=0,this.timer=a,this.PlayAnimation(this.MainLoopAnimationIndex)}this.updateMaterial(this.frame),this.timer=1/this.FrameRate,0===this.AnimationIndex?this.IsAnimation_0_Holdable&&(this.timer=this.Animation_0_HoldDurations[this.frame]/this.FrameRate):1===this.AnimationIndex?this.IsAnimation_1_Holdable&&(this.timer=this.Animation_1_HoldDurations[this.frame]/this.FrameRate):2===this.AnimationIndex?this.IsAnimation_2_Holdable&&(this.timer=this.Animation_2_HoldDurations[this.frame]/this.FrameRate):3===this.AnimationIndex?this.IsAnimation_3_Holdable&&(this.timer=this.Animation_3_HoldDurations[this.frame]/this.FrameRate):4===this.AnimationIndex&&this.IsAnimation_4_Holdable&&(this.timer=this.Animation_4_HoldDurations[this.frame]/this.FrameRate)}},MaterialAnimationHandler.prototype.updateMaterial=function(t){if(!globalVariables.IsGamePause){var a=1/this.Row[this.AnimationIndex],i=1/this.Column[this.AnimationIndex],e=t%this.Row[this.AnimationIndex],n=Math.floor(t/this.Row[this.AnimationIndex]),r=this.entity.model.meshInstances;r[0].material=this.material,this.transform=[a,i,e*a,n*i],r[0].setParameter("texture_diffuseMapTransform",this.transform),r[0].setParameter("texture_emissiveMapTransform",this.transform),r[0].setParameter("texture_opacityMapTransform",this.transform)}};pc.extend(pc,function(){function computeGaussian(e,t){return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-e*e/(2*t*t))}function calculateBlurValues(e,t,s,o,r){e[0]=computeGaussian(0,r),t[0]=0,t[1]=0;var i,a,l=e[0];for(i=0,a=Math.floor(7.5);i<a;i++){var u=computeGaussian(i+1,r);e[2*i]=u,e[2*i+1]=u,l+=2*u;var h=2*i+1.5;t[4*i]=s*h,t[4*i+1]=o*h,t[4*i+2]=-s*h,t[4*i+3]=-o*h}for(i=0,a=e.length;i<a;i++)e[i]/=l}var BloomEffect=function(e){var t={aPosition:pc.SEMANTIC_POSITION},s=["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition + 1.0) * 0.5;","}"].join("\n"),o=["precision "+e.precision+" float;","","varying vec2 vUv0;","","uniform sampler2D uBaseTexture;","uniform float uBloomThreshold;","","void main(void)","{","    vec4 color = texture2D(uBaseTexture, vUv0);","","    gl_FragColor = clamp((color - uBloomThreshold) / (1.0 - uBloomThreshold), 0.0, 1.0);","}"].join("\n"),r=["precision "+e.precision+" float;","","#define SAMPLE_COUNT 15","","varying vec2 vUv0;","","uniform sampler2D uBloomTexture;","uniform vec2 uBlurOffsets[SAMPLE_COUNT];","uniform float uBlurWeights[SAMPLE_COUNT];","","void main(void)","{","    vec4 color = vec4(0.0);","    for (int i = 0; i < SAMPLE_COUNT; i++)","    {","        color += texture2D(uBloomTexture, vUv0 + uBlurOffsets[i]) * uBlurWeights[i];","    }","","    gl_FragColor = color;","}"].join("\n"),i=["precision "+e.precision+" float;","","varying vec2 vUv0;","","uniform float uBloomEffectIntensity;","uniform sampler2D uBaseTexture;","uniform sampler2D uBloomTexture;","","void main(void)","{","    vec4 bloom = texture2D(uBloomTexture, vUv0) * uBloomEffectIntensity;","    vec4 base = texture2D(uBaseTexture, vUv0);","","    base *= (1.0 - clamp(bloom, 0.0, 1.0));","","    gl_FragColor = base + bloom;","}"].join("\n");this.extractShader=new pc.Shader(e,{attributes:t,vshader:s,fshader:o}),this.blurShader=new pc.Shader(e,{attributes:t,vshader:s,fshader:r}),this.combineShader=new pc.Shader(e,{attributes:t,vshader:s,fshader:i});var a=e.width,l=e.height;this.targets=[];for(var u=0;u<2;u++){var h=new pc.Texture(e,{format:pc.PIXELFORMAT_R8_G8_B8_A8,width:a>>1,height:l>>1});h.minFilter=pc.FILTER_LINEAR,h.magFilter=pc.FILTER_LINEAR,h.addressU=pc.ADDRESS_CLAMP_TO_EDGE,h.addressV=pc.ADDRESS_CLAMP_TO_EDGE;var n=new pc.RenderTarget(e,h,{depth:!1});this.targets.push(n)}this.bloomThreshold=.25,this.blurAmount=4,this.bloomIntensity=1.25,this.sampleWeights=new Float32Array(15),this.sampleOffsets=new Float32Array(30)};return(BloomEffect=pc.inherits(BloomEffect,pc.PostEffect)).prototype=pc.extend(BloomEffect.prototype,{render:function(e,t,s){var o=this.device,r=o.scope;r.resolve("uBloomThreshold").setValue(this.bloomThreshold),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(o,this.targets[0],this.vertexBuffer,this.extractShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,1/this.targets[1].width,0,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),pc.drawFullscreenQuad(o,this.targets[1],this.vertexBuffer,this.blurShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,0,1/this.targets[0].height,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[1].colorBuffer),pc.drawFullscreenQuad(o,this.targets[0],this.vertexBuffer,this.blurShader),r.resolve("uBloomEffectIntensity").setValue(this.bloomIntensity),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(o,t,this.vertexBuffer,this.combineShader,s)}}),{BloomEffect:BloomEffect}}());var Bloom=pc.createScript("bloom");Bloom.attributes.add("bloomIntensity",{type:"number",default:1,min:0,title:"Intensity"}),Bloom.attributes.add("bloomThreshold",{type:"number",default:.25,min:0,max:1,precision:2,title:"Threshold"}),Bloom.attributes.add("blurAmount",{type:"number",default:4,min:1,title:"Blur amount"}),Bloom.prototype.initialize=function(){this.effect=new pc.BloomEffect(this.app.graphicsDevice),this.effect.bloomThreshold=this.bloomThreshold,this.effect.blurAmount=this.blurAmount,this.effect.bloomIntensity=this.bloomIntensity;var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("attr",(function(e,t){this.effect[e]=t}),this),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};var ScrollingTexture=pc.createScript("scrollingTexture");ScrollingTexture.attributes.add("materialAsset",{type:"asset"}),ScrollingTexture.attributes.add("speed",{type:"vec2"}),ScrollingTexture.tmp=new pc.Vec2,ScrollingTexture.prototype.initialize=function(){this.materialAsset&&(this.material=this.materialAsset.resource)},ScrollingTexture.prototype.update=function(e){var t=ScrollingTexture.tmp;t.set(this.speed.x,this.speed.y),t.scale(e),this.material.diffuseMapOffset=this.material.diffuseMapOffset.add(t),this.material.normalMapOffset.add(t),this.material.emissiveMapOffset.add(t),this.material.update()};var SunLightGameManager=pc.createScript("sunLightGameManager");SunLightGameManager.attributes.add("UIManagerEntity",{type:"entity"}),SunLightGameManager.attributes.add("MercuryEntity",{type:"entity"}),SunLightGameManager.attributes.add("VenusEntity",{type:"entity"}),SunLightGameManager.attributes.add("EarthEntity",{type:"entity"}),SunLightGameManager.attributes.add("MarsEntity",{type:"entity"}),SunLightGameManager.attributes.add("JupiterEntity",{type:"entity"}),SunLightGameManager.attributes.add("NeptuneEntity",{type:"entity"}),SunLightGameManager.attributes.add("SaturnEntity",{type:"entity"}),SunLightGameManager.attributes.add("UranusEntity",{type:"entity"}),SunLightGameManager.attributes.add("StarCount",{type:"number",default:0}),SunLightGameManager.attributes.add("QuestionsCount",{type:"number",default:0}),SunLightGameManager.attributes.add("TargetArrayIndex",{type:"number",array:!0}),SunLightGameManager.attributes.add("CurrentTargetIndex",{type:"number",default:0}),SunLightGameManager.attributes.add("CurrentTargetEntity",{type:"entity"}),SunLightGameManager.prototype.initialize=function(){},SunLightGameManager.prototype.SuffleTargets=function(){for(var t=0,e=0;e<8;e++){t=this.TargetArrayIndex[e];var a=8*Math.random();a=Math.floor(a),this.TargetArrayIndex[e]=this.TargetArrayIndex[a],this.TargetArrayIndex[a]=t}},SunLightGameManager.prototype.ShowTarget=function(){this.UIManagerEntity.script.uimanager.DisableMsgBoard5();var t=this.TargetArrayIndex[this.QuestionsCount];this.CurrentTargetIndex=t,this.UIManagerEntity.script.uimanager.ShowMsgBoard1(t),0===t?(this.MercuryEntity.script.planetHandler.Selected=!0,this.CurrentTargetEntity=this.MercuryEntity):1===t?(this.VenusEntity.script.planetHandler.Selected=!0,this.CurrentTargetEntity=this.VenusEntity):2===t?(this.EarthEntity.script.planetHandler.Selected=!0,this.CurrentTargetEntity=this.EarthEntity):3===t?(this.MarsEntity.script.planetHandler.Selected=!0,this.CurrentTargetEntity=this.MarsEntity):4===t?(this.JupiterEntity.script.planetHandler.Selected=!0,this.CurrentTargetEntity=this.JupiterEntity):5===t?(this.SaturnEntity.script.planetHandler.Selected=!0,this.CurrentTargetEntity=this.SaturnEntity):6===t?(this.UranusEntity.script.planetHandler.Selected=!0,this.CurrentTargetEntity=this.UranusEntity):7===t&&(this.NeptuneEntity.script.planetHandler.Selected=!0,this.CurrentTargetEntity=this.NeptuneEntity),this.UIManagerEntity.script.uimanager.ShowMsgBoard5(this.CurrentTargetIndex,this.CurrentTargetEntity)},SunLightGameManager.prototype.AddStarCount=function(){this.StarCount+=2,this.UIManagerEntity.script.uimanager.UpdateStarCount(this.StarCount),this.UIManagerEntity.script.uimanager.ShowMsgBoard3(8),this.UIManagerEntity.script.uimanager.DisableMsgBoard5(),this.UIManagerEntity.script.uimanager.ShowMsgBoard2(this.CurrentTargetIndex,this.CurrentTargetEntity),this.QuestionsCount+=1,this.QuestionsCount<5?this.ShowNextTarget():setTimeout((()=>{globalVariables.IsGamePause=!0,this.ShowGameResults()}),2e3)},SunLightGameManager.prototype.ReduceStarCount=function(){this.StarCount-=1,this.UIManagerEntity.script.uimanager.ShowMsgBoard4(this.CurrentTargetIndex),this.StarCount<0&&(this.StarCount=0),this.UIManagerEntity.script.uimanager.UpdateStarCount(this.StarCount)},SunLightGameManager.prototype.ReduceStarCountForMissed=function(){this.StarCount-=1,this.StarCount<0&&(this.StarCount=0),this.UIManagerEntity.script.uimanager.ShowMissTarget(),this.UIManagerEntity.script.uimanager.UpdateStarCount(this.StarCount)},SunLightGameManager.prototype.ShowNextTarget=function(){setTimeout((()=>{this.ShowTarget()}),5500)},SunLightGameManager.prototype.ShowGameResults=function(){this.UIManagerEntity.script.uimanager.ShowGameResults(this.StarCount)},SunLightGameManager.prototype.ShowInFullScreen=function(){this.app.enableFullscreen(document.body)},SunLightGameManager.prototype.Reset=function(){this.StarCount=0,this.QuestionsCount=0,this.CurrentTargetIndex=0,this.MercuryEntity.script.planetHandler.Selected=!1,this.VenusEntity.script.planetHandler.Selected=!1,this.EarthEntity.script.planetHandler.Selected=!1,this.MarsEntity.script.planetHandler.Selected=!1,this.JupiterEntity.script.planetHandler.Selected=!1,this.NeptuneEntity.script.planetHandler.Selected=!1,this.SaturnEntity.script.planetHandler.Selected=!1,this.UranusEntity.script.planetHandler.Selected=!1,setTimeout((()=>{globalVariables.IsGamePause=!1,this.SuffleTargets(),this.ShowTarget()}),500)};var MenuManager=pc.createScript("menuManager");MenuManager.attributes.add("PlayBtnEntity",{type:"entity"}),MenuManager.attributes.add("GamePlayScreenName",{type:"string"}),MenuManager.prototype.initialize=function(){this.PlayBtnEntity.button.on("mousedown",this.OnClickPlay,this)},MenuManager.prototype.OnClickPlay=function(){var e=this.app.scenes.find(this.GamePlayScreenName),t=this.app.root.findByName("Root");this.app.scenes.loadSceneHierarchy(e.url,(function(e,n){e?console.error(e):t.destroy()}))};var FollowWorldTarget=pc.createScript("followWorldTarget");FollowWorldTarget.attributes.add("target",{type:"entity"}),FollowWorldTarget.attributes.add("camera",{type:"entity"}),FollowWorldTarget.prototype.postUpdate=function(e){var t=this.target.getPosition(),a=new pc.Vec3;if(this.camera.camera.worldToScreen(t,a),a.z>0){this.entity.element.enabled=!0;var i=this.app.graphicsDevice.maxPixelRatio;a.x*=i,a.y*=i;var r=this.entity.element.screen.screen.scale,o=this.app.graphicsDevice;this.entity.setLocalPosition(a.x/r,(o.height-a.y)/r,0)}else this.entity.element.enabled=!1};var Uimanager=pc.createScript("uimanager");Uimanager.attributes.add("StarCountTxtEntity",{type:"entity"}),Uimanager.attributes.add("PauseBtnEntity",{type:"entity"}),Uimanager.attributes.add("PauseMenuEntity",{type:"entity"}),Uimanager.attributes.add("ResumeBtnEntity",{type:"entity"}),Uimanager.attributes.add("SettingsBtnEntity",{type:"entity"}),Uimanager.attributes.add("SettingsMenuEntity",{type:"entity"}),Uimanager.attributes.add("SettingsCloseBtnEntity",{type:"entity"}),Uimanager.attributes.add("RestartBtnEntity",{type:"entity"}),Uimanager.attributes.add("RestartMenuEntity",{type:"entity"}),Uimanager.attributes.add("RestartYesBtnEntity",{type:"entity"}),Uimanager.attributes.add("RestartNoBtnEntity",{type:"entity"}),Uimanager.attributes.add("MsgBoard1Entity",{type:"entity"}),Uimanager.attributes.add("MsgBoard2Entity",{type:"entity"}),Uimanager.attributes.add("MsgBoard3Entity",{type:"entity"}),Uimanager.attributes.add("MsgBoard4Entity",{type:"entity"}),Uimanager.attributes.add("MsgBoard5Entity",{type:"entity"}),Uimanager.attributes.add("MsgBoard1TxtTxtEntity",{type:"entity"}),Uimanager.attributes.add("MsgBoard2TxtTxtEntity",{type:"entity"}),Uimanager.attributes.add("MsgBoard3TxtTxtEntity",{type:"entity"}),Uimanager.attributes.add("MsgBoard4TxtTxtEntity",{type:"entity"}),Uimanager.attributes.add("MsgBoard5TxtTxtEntity",{type:"entity"}),Uimanager.attributes.add("MissTargetBoardEntity",{type:"entity"}),Uimanager.attributes.add("PlanetNameTagEnitities",{type:"entity",array:!0}),Uimanager.attributes.add("PlanetSpeedTagEnitities",{type:"entity",array:!0}),Uimanager.attributes.add("TargetMsgs",{type:"string",array:!0}),Uimanager.attributes.add("WrongTargetMsgs",{type:"string",array:!0}),Uimanager.attributes.add("PlanetSpeedMsgs",{type:"string",array:!0}),Uimanager.attributes.add("PlanetTargetNames",{type:"string",array:!0}),Uimanager.attributes.add("MenuScreenName",{type:"string"}),Uimanager.attributes.add("GameResultsScreenEntity",{type:"entity"}),Uimanager.attributes.add("ResultsScreenStarCountEntity",{type:"entity"}),Uimanager.attributes.add("ResultsScreenRestartBtnEntity",{type:"entity"}),Uimanager.attributes.add("MenuViewEntity",{type:"entity"}),Uimanager.attributes.add("MenuPlayBtnEntity",{type:"entity"}),Uimanager.attributes.add("GamePlayUIEntity",{type:"entity"}),Uimanager.attributes.add("GamePlayViewEntity",{type:"entity"}),Uimanager.attributes.add("GameManagerEntity",{type:"entity"}),Uimanager.prototype.initialize=function(){this.MenuPlayBtnEntity.button.on("mousedown",this.OnClickPlay,this),this.PauseBtnEntity.button.on("mousedown",this.OnClickPlause,this),this.ResumeBtnEntity.button.on("mousedown",this.OnClickResume,this),this.SettingsBtnEntity.button.on("mousedown",this.OnClickSettings,this),this.SettingsCloseBtnEntity.button.on("mousedown",this.OnClickSettingsClose,this),this.RestartBtnEntity.button.on("mousedown",this.OnClickRestart,this),this.RestartYesBtnEntity.button.on("mousedown",this.OnClickRestartYes,this),this.RestartNoBtnEntity.button.on("mousedown",this.OnClickRestartNo,this),this.ResultsScreenRestartBtnEntity.button.on("mousedown",this.OnClickRestartYes,this)},Uimanager.prototype.OnClickPlay=function(){this.Reset(),this.GameManagerEntity.script.sunLightGameManager.Reset(),this.MenuViewEntity.enabled=!1,this.GamePlayUIEntity.enabled=!0,this.GamePlayViewEntity.enabled=!0},Uimanager.prototype.ShowMsgBoard1=function(t){this.MsgBoard4Entity.enabled=!1,this.MsgBoard3Entity.enabled=!1,this.MsgBoard1Entity.enabled=!0,this.MsgBoard1TxtTxtEntity.element.text=this.TargetMsgs[t]},Uimanager.prototype.ShowMsgBoard2=function(t,e){this.PlanetSpeedTagEnitities[t].enabled=!0,setTimeout((()=>{this.PlanetSpeedTagEnitities[t].enabled=!1}),5500)},Uimanager.prototype.ShowMsgBoard3=function(t){this.MsgBoard4Entity.enabled=!1,this.MsgBoard1Entity.enabled=!1,this.MsgBoard3Entity.enabled=!0,this.MsgBoard3TxtTxtEntity.element.text=this.TargetMsgs[t]},Uimanager.prototype.ShowMsgBoard4=function(t){this.MsgBoard1Entity.enabled=!1,this.MsgBoard4Entity.enabled=!0,this.MsgBoard4TxtTxtEntity.element.text=this.WrongTargetMsgs[t]},Uimanager.prototype.ShowMsgBoard5=function(t,e){this.PlanetNameTagEnitities[t].enabled=!0},Uimanager.prototype.ShowMissTarget=function(){this.MissTargetBoardEntity.enabled=!0,setTimeout((()=>{this.MissTargetBoardEntity.enabled=!1}),2e3)},Uimanager.prototype.DisableMsgBoard5=function(){this.PlanetNameTagEnitities[0].enabled=!1,this.PlanetNameTagEnitities[1].enabled=!1,this.PlanetNameTagEnitities[2].enabled=!1,this.PlanetNameTagEnitities[3].enabled=!1,this.PlanetNameTagEnitities[4].enabled=!1,this.PlanetNameTagEnitities[5].enabled=!1,this.PlanetNameTagEnitities[6].enabled=!1,this.PlanetNameTagEnitities[7].enabled=!1},Uimanager.prototype.UpdateStarCount=function(t){this.StarCountTxtEntity.element.text=t.toString()},Uimanager.prototype.OnClickPlause=function(){globalVariables.IsGamePause||(globalVariables.IsGamePause=!0,this.PauseMenuEntity.enabled=!0)},Uimanager.prototype.OnClickResume=function(){globalVariables.IsGamePause=!1,this.PauseMenuEntity.enabled=!1},Uimanager.prototype.OnClickSettings=function(){this.SettingsMenuEntity.enabled=!0},Uimanager.prototype.OnClickRestart=function(){this.PauseMenuEntity.enabled=!1,this.RestartMenuEntity.enabled=!0},Uimanager.prototype.OnClickSettingsClose=function(){this.SettingsMenuEntity.enabled=!1},Uimanager.prototype.ShowGameResults=function(t){this.GameResultsScreenEntity.enabled=!0,this.ResultsScreenStarCountEntity.element.text=t},Uimanager.prototype.OnClickRestartYes=function(){this.Reset(),this.MenuViewEntity.enabled=!0},Uimanager.prototype.OnClickRestartNo=function(){this.RestartMenuEntity.enabled=!1,globalVariables.IsGamePause=!1},Uimanager.prototype.Reset=function(){this.MenuViewEntity.enabled=!1,this.GamePlayUIEntity.enabled=!1,this.GamePlayViewEntity.enabled=!1,this.SettingsMenuEntity.enabled=!1,this.RestartMenuEntity.enabled=!1,this.PauseMenuEntity.enabled=!1,this.GameResultsScreenEntity.enabled=!1,this.MsgBoard1Entity.enabled=!1,this.MsgBoard2Entity.enabled=!1,this.MsgBoard3Entity.enabled=!1,this.StarCountTxtEntity.element.text=0};var GlobalVariables=pc.createScript("globalVariables");GlobalVariables.attributes.add("IsGamePause",{type:"boolean",default:!1}),GlobalVariables.attributes.add("IsFired",{type:"boolean",default:!1}),GlobalVariables.prototype.initialize=function(){window.globalVariables=this};var RobotHandler=pc.createScript("robotHandler");RobotHandler.attributes.add("TargetPosition",{type:"vec3",default:[0,0,0]}),RobotHandler.prototype.initialize=function(){this.from=this.entity.getPosition(),this.val=0},RobotHandler.prototype.ease=function(t){return t*t*t},RobotHandler.prototype.update=function(t){if(!(this.val>1)){this.val+=t;var e=new pc.Vec3;e.lerp(this.from,this.TargetPosition,this.ease(this.val)),this.entity.setPosition(e)}};